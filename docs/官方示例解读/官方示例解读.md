# 官方示例解读

## 概述

本项目提供了丰富的官方示例页面，展示了如何使用项目中的各种组件和功能。这些示例涵盖了常见的业务场景，可以作为开发参考和最佳实践指南。

## 示例页面列表

1. **Dashboard（仪表盘）** - 数据可视化展示
2. **Users（用户管理）** - 完整的 CRUD 操作示例
3. **Tasks（任务管理）** - 任务列表和状态管理
4. **Chats（聊天）** - 聊天界面示例
5. **Settings（设置）** - 用户设置页面
6. **Apps（应用）** - 应用列表展示
7. **Auth（认证）** - 登录、注册、忘记密码等

---

## 1. Dashboard - 仪表盘示例

### 功能说明

Dashboard 页面展示了数据可视化和管理后台的典型布局，包含统计卡片、图表和最近活动列表。

### 核心特性

- ✅ 统计卡片（Revenue、Subscriptions、Sales、Active Now）
- ✅ 图表展示（Overview Chart）
- ✅ 最近销售列表（Recent Sales）
- ✅ Tab 切换（Overview、Analytics）
- ✅ 响应式布局

### 文件结构

```
src/develop/(views)/official/dashboard/
├── index.tsx                    # 主页面
└── components/
    ├── analytics.tsx           # 分析图表组件
    ├── analytics-chart.tsx      # 图表组件
    ├── overview.tsx             # 概览图表
    └── recent-sales.tsx         # 最近销售列表
```

### 关键实现

**统计卡片**:
```typescript
<Card>
  <CardHeader>
    <CardTitle>Total Revenue</CardTitle>
    <Icon />
  </CardHeader>
  <CardContent>
    <div className="text-2xl font-bold">$45,231.89</div>
    <p className="text-xs text-muted-foreground">
      +20.1% from last month
    </p>
  </CardContent>
</Card>
```

**Tab 切换**:
```typescript
<Tabs defaultValue="overview">
  <TabsList>
    <TabsTrigger value="overview">Overview</TabsTrigger>
    <TabsTrigger value="analytics">Analytics</TabsTrigger>
  </TabsList>
  <TabsContent value="overview">
    {/* 概览内容 */}
  </TabsContent>
  <TabsContent value="analytics">
    <Analytics />
  </TabsContent>
</Tabs>
```

### 学习要点

1. **布局结构**: Header + Main 的标准布局
2. **数据展示**: 使用 Card 组件展示统计数据
3. **图表集成**: 使用 Recharts 进行数据可视化
4. **响应式设计**: Grid 布局适配不同屏幕

---

## 2. Users - 用户管理示例

### 功能说明

Users 页面展示了完整的数据表格实现，包括搜索、过滤、分页、排序、批量操作等所有功能。

### 核心特性

- ✅ 完整的 CRUD 操作
- ✅ 数据表格（搜索、过滤、排序、分页）
- ✅ 批量操作（删除、导出）
- ✅ URL 状态同步
- ✅ 表单验证（Zod）
- ✅ 对话框管理（创建、编辑、删除、邀请）

### 文件结构

```
src/develop/(views)/official/users/
├── index.tsx                    # 主页面
├── components/
│   ├── users-table.tsx         # 表格组件
│   ├── users-columns.tsx       # 列定义
│   ├── users-dialogs.tsx       # 对话框组件
│   ├── users-provider.tsx      # 数据提供者
│   └── ...                     # 其他组件
└── data/
    ├── data.ts                 # 模拟数据
    ├── schema.ts               # Zod 模式
    └── users.ts                # 用户类型定义
```

### 关键实现

**表格实现**:
```typescript
export function UsersTable({ data, search, navigate }: DataTableProps) {
  const { columnFilters, pagination, ... } = useTableUrlState({
    search,
    navigate,
    pagination: { defaultPage: 1, defaultPageSize: 10 },
    columnFilters: [
      { columnId: 'username', searchKey: 'username', type: 'string' },
      { columnId: 'status', searchKey: 'status', type: 'array' },
      { columnId: 'role', searchKey: 'role', type: 'array' },
    ],
  })
  
  const table = useReactTable({
    data,
    columns,
    state: { columnFilters, pagination },
    // ... 配置
  })
  
  return (
    <div>
      <DataTableToolbar table={table} />
      <Table>{/* 表格内容 */}</Table>
      <DataTablePagination table={table} />
      <DataTableBulkActions table={table} entityName="用户">
        <Button onClick={handleDelete}>删除</Button>
      </DataTableBulkActions>
    </div>
  )
}
```

**对话框管理**:
```typescript
const [dialog, setDialog] = useDialogState<'create' | 'edit' | 'delete' | 'invite'>(null)

<Dialog open={dialog === 'create'} onOpenChange={() => setDialog(null)}>
  <CreateUserDialog />
</Dialog>
```

### 学习要点

1. **URL 状态同步**: 使用 `useTableUrlState` 实现可分享的表格视图
2. **表单验证**: 使用 Zod 进行类型安全的表单验证
3. **对话框管理**: 使用 `useDialogState` 管理多个对话框
4. **批量操作**: 使用 `DataTableBulkActions` 实现批量操作

---

## 3. Tasks - 任务管理示例

### 功能说明

Tasks 页面展示了任务管理系统的完整实现，包括任务列表、状态管理、优先级设置等。

### 核心特性

- ✅ 任务列表（带状态和优先级）
- ✅ 全局搜索
- ✅ 状态过滤（待办、进行中、已完成）
- ✅ 优先级过滤（低、中、高）
- ✅ 任务创建和编辑
- ✅ 批量操作（删除、状态更新）
- ✅ 导入/导出功能

### 文件结构

```
src/develop/(views)/official/tasks/
├── index.tsx                    # 主页面
├── components/
│   ├── tasks-table.tsx         # 表格组件
│   ├── tasks-columns.tsx       # 列定义
│   ├── tasks-dialogs.tsx       # 对话框
│   ├── tasks-provider.tsx      # 数据提供者
│   └── ...                     # 其他组件
└── data/
    ├── data.tsx                # 模拟数据
    ├── schema.ts               # Zod 模式
    └── tasks.ts                # 任务类型定义
```

### 关键实现

**全局搜索**:
```typescript
const { globalFilter, onGlobalFilterChange } = useTableUrlState({
  search,
  navigate,
  globalFilter: { enabled: true, key: 'filter' },
})

const table = useReactTable({
  // ...
  globalFilterFn: (row, _columnId, filterValue) => {
    const id = String(row.getValue('id')).toLowerCase()
    const title = String(row.getValue('title')).toLowerCase()
    const searchValue = String(filterValue).toLowerCase()
    return id.includes(searchValue) || title.includes(searchValue)
  },
})
```

**状态徽章**:
```typescript
const statuses = [
  { label: '待办', value: 'todo', icon: CircleIcon },
  { label: '进行中', value: 'in-progress', icon: ClockIcon },
  { label: '已完成', value: 'done', icon: CheckIcon },
]
```

### 学习要点

1. **全局搜索**: 自定义 `globalFilterFn` 实现多列搜索
2. **状态管理**: 使用徽章和图标展示状态
3. **优先级**: 使用颜色和图标区分优先级
4. **数据导入**: 实现 CSV/Excel 导入功能

---

## 4. Chats - 聊天示例

### 功能说明

Chats 页面展示了聊天界面的实现，包括消息列表、聊天输入框等。

### 核心特性

- ✅ 聊天列表
- ✅ 消息展示
- ✅ 新聊天创建
- ✅ 消息类型（文本、图片等）

### 文件结构

```
src/develop/(views)/official/chats/
├── index.tsx                    # 主页面
├── components/
│   └── new-chat.tsx           # 新聊天组件
└── data/
    ├── chat-types.ts          # 聊天类型
    └── convo.json             # 对话数据
```

### 学习要点

1. **聊天界面布局**: 侧边栏 + 主内容区
2. **消息渲染**: 根据消息类型渲染不同内容
3. **实时更新**: 可以集成 WebSocket 实现实时聊天

---

## 5. Settings - 设置示例

### 功能说明

Settings 页面展示了用户设置页面的实现，包括账户设置、外观设置、通知设置等。

### 核心特性

- ✅ 设置分类（Account、Appearance、Notifications、Display）
- ✅ 表单验证
- ✅ 设置保存
- ✅ 侧边栏导航

### 文件结构

```
src/develop/(views)/official/settings/
├── index.tsx                    # 主页面
├── account/
│   ├── index.tsx               # 账户设置页面
│   └── account-form.tsx        # 账户表单
├── appearance/
│   ├── index.tsx               # 外观设置页面
│   └── appearance-form.tsx     # 外观表单
└── ...
```

### 关键实现

**设置表单**:
```typescript
const form = useForm<SettingsFormValues>({
  resolver: zodResolver(settingsSchema),
  defaultValues: {
    // 默认值
  },
})

function onSubmit(data: SettingsFormValues) {
  // 保存设置
  toast.success('设置已保存')
}
```

**侧边栏导航**:
```typescript
<SidebarNav
  items={[
    { title: '账户', href: '/settings/account' },
    { title: '外观', href: '/settings/appearance' },
    // ...
  ]}
/>
```

### 学习要点

1. **表单管理**: 使用 React Hook Form + Zod
2. **设置持久化**: 保存到后端或本地存储
3. **导航结构**: 使用侧边栏导航组织设置页面

---

## 6. Auth - 认证示例

### 功能说明

Auth 页面展示了完整的认证流程，包括登录、注册、忘记密码、OTP 验证等。

### 核心特性

- ✅ 登录页面（多种样式）
- ✅ 注册页面
- ✅ 忘记密码
- ✅ OTP 验证
- ✅ 表单验证
- ✅ 错误处理

### 文件结构

```
src/develop/(views)/official/auth/
├── auth-layout.tsx             # 认证布局
├── sign-in/
│   ├── index.tsx               # 登录页面
│   ├── sign-in-2.tsx           # 登录页面（样式2）
│   └── components/
│       └── user-auth-form.tsx  # 登录表单
├── sign-up/
│   └── components/
│       └── sign-up-form.tsx    # 注册表单
└── ...
```

### 关键实现

**登录表单**:
```typescript
const form = useForm<LoginFormValues>({
  resolver: zodResolver(loginSchema),
})

async function onSubmit(data: LoginFormValues) {
  try {
    const response = await login(data)
    useAuthStore.getState().auth.setAccessToken(response.token)
    useAuthStore.getState().auth.setUser(response.user)
    router.navigate({ to: '/' })
  } catch (error) {
    toast.error('登录失败')
  }
}
```

**OTP 输入**:
```typescript
<InputOTP
  value={otp}
  onChange={setOtp}
  maxLength={6}
>
  <InputOTPGroup>
    <InputOTPSlot index={0} />
    <InputOTPSlot index={1} />
    {/* ... */}
  </InputOTPGroup>
</InputOTP>
```

### 学习要点

1. **表单验证**: 使用 Zod 进行客户端验证
2. **错误处理**: 统一的错误提示
3. **状态管理**: 登录后更新 AuthStore
4. **路由保护**: 登录后跳转到首页

---

## 7. Apps - 应用示例

### 功能说明

Apps 页面展示了应用列表的展示方式，可以作为应用商店或应用管理的参考。

### 核心特性

- ✅ 应用卡片展示
- ✅ 应用分类
- ✅ 应用搜索
- ✅ 响应式网格布局

### 学习要点

1. **卡片布局**: 使用 Grid 布局展示应用卡片
2. **分类过滤**: 实现应用分类功能
3. **搜索功能**: 集成搜索功能

---

## 示例页面最佳实践

### 1. 数据获取

使用 TanStack Query 进行数据获取：

```typescript
const { data, isLoading } = useQuery({
  queryKey: ['users'],
  queryFn: () => getUsers(),
})
```

### 2. 表单处理

使用 React Hook Form + Zod：

```typescript
const form = useForm<FormValues>({
  resolver: zodResolver(schema),
})

function onSubmit(data: FormValues) {
  // 处理提交
}
```

### 3. 状态管理

- 全局状态：使用 Zustand（AuthStore）
- 本地状态：使用 useState
- 服务器状态：使用 TanStack Query
- URL 状态：使用 TanStack Router

### 4. 错误处理

统一的错误处理：

```typescript
try {
  await apiCall()
  toast.success('操作成功')
} catch (error) {
  handleServerError(error)
}
```

### 5. 加载状态

```typescript
if (isLoading) {
  return <Skeleton />
}

if (error) {
  return <ErrorComponent />
}

return <Content />
```

---

## 示例页面学习路径

### 初学者

1. **Dashboard**: 学习基础布局和组件使用
2. **Auth**: 学习表单处理和认证流程
3. **Settings**: 学习表单验证和设置管理

### 中级

1. **Users**: 学习数据表格和 CRUD 操作
2. **Tasks**: 学习复杂的状态管理和过滤

### 高级

1. **自定义组件**: 基于示例创建自定义组件
2. **性能优化**: 优化大数据量表格
3. **集成后端**: 连接真实的后端 API

---

## 总结

官方示例提供了：

- ✅ **Dashboard**: 数据可视化展示
- ✅ **Users**: 完整的 CRUD 操作
- ✅ **Tasks**: 任务管理系统
- ✅ **Chats**: 聊天界面
- ✅ **Settings**: 设置页面
- ✅ **Auth**: 认证流程
- ✅ **Apps**: 应用列表

这些示例涵盖了管理后台的常见场景，展示了项目的最佳实践，可以作为开发的参考和起点。通过学习和参考这些示例，可以快速掌握项目的使用方法和开发模式。

